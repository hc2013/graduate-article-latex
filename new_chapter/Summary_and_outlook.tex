\chapter{总结和展望}

\section{总结}
为了满足用户对大数据量地理轨迹的相似检索和可视化需求，本文设计和开发了地理轨迹数据服务。主要工作包括对Lucene索引结构进行扩展，设计和实现了独立的优先点树索引结构，以及单独的地图瓦片数据服务，并把两个子服务结合起来，经由前端库调用，从工程角度实现了轨迹数据相似检索、索引更新以及可视化的功能，解决了用户的商业需求。

本文首先介绍了项目背景和相关项目的研究现状。然后对本文所涉及的相关技术如优先点树，Lucene,地理坐标系，地图投影法，MapBox-GL标准，nodejs Express框架等进行了介绍。随后对系统需求进行分析，通过用例图，用例描述，功能和非功能列表等方式分析了各个模块的需求和职责，然后使用架构4+1模型进行了架构设计。紧接着，根据架构设计，分别针对两个主要的功能子服务进行详细设计，使用了类图，流程图，代码展示等方法说明设计与实现的细节。最后，给出了系统测试，包括功能和性能测试的结果。

\section{进一步工作展望}
地理轨迹数据服务还有进一步的发展空间。从检索算法上看，目前实现的版本是是单个优先点的多路树，这种结构的剪枝性能在数学上被证明不如另一种多优先点多路树更好。未来可以考虑更改Vptree的具体实现。当前对于轨迹相似检索考虑的标准是几何距离，而没有考虑轨迹的方向性，这使得检索本身的精度有一定的损失，未来可以加入对方向数据的考量。轨迹索引初始建立时间较长，与优先点选取算法过于繁琐有关，这也是可以优化的地方。轨迹索引常驻内存较大，可能与距离缓存较多而缺乏过期策略有关，未来可以通过更好的数据缓存管理来减少常驻内存的使用。

而对于地理瓦片数据服务，当前版本的瓦片更新的粒度最小也是一个瓦片，这个粒度太粗，未来应该提升到对瓦片内部结构的更新功能。


